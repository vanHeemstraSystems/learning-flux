-----

## apiVersion: image.toolkit.fluxcd.io/v1beta2
kind: ImageRepository
metadata:
name: demo-app
namespace: flux-system
spec:
image: ghcr.io/stefanprodan/podinfo
interval: 5m0s
accessFrom:
namespaceSelectors:
- matchLabels:
kubernetes.io/metadata.name: flux-system

## apiVersion: image.toolkit.fluxcd.io/v1beta2
kind: ImagePolicy
metadata:
name: demo-app
namespace: flux-system
spec:
imageRepositoryRef:
name: demo-app
policy:
semver:
range: 6.x.x

apiVersion: image.toolkit.fluxcd.io/v1beta1
kind: ImageUpdateAutomation
metadata:
name: demo-app
namespace: flux-system
spec:
interval: 10m0s
sourceRef:
kind: GitRepository
name: flux-system
git:
checkout:
ref:
branch: main
commit:
author:
email: fluxcdbot@users.noreply.github.com
name: fluxcdbot
messageTemplate: |
Automated image update

```
    Automation name: {{ .AutomationObject }}
    
    Files:
    {{ range $filename, $_ := .Updated.Files -}}
    - {{ $filename }}
    {{ end -}}
    
    Objects:
    {{ range $resource, $_ := .Updated.Objects -}}
    - {{ $resource.Kind }} {{ $resource.Name }}
    {{ end -}}
    
    Images:
    {{ range .Updated.Images -}}
    - {{.}}
    {{ end -}}
```

update:
path: ./apps/demo
strategy: Setters
